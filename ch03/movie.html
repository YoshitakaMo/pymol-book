<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Movie - pymol-book</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="shortcut icon" href="../">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:500" rel="stylesheet" type="text/css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
        <!-- MathJax -->
        <script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS_CHTML"></script>
        
    </head>
    <body class="light">
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            document.body.className = theme;
            document.querySelector('html').className = theme + ' js';
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <ol class="chapter"><li class="chapter-item expanded affix "><a href="../index.html">TOP</a></li><li class="chapter-item expanded "><a href="../ch01/index.html"><strong aria-hidden="true">1.</strong> 第1章 PyMOL チュートリアル: アルカリホスファターゼの構造を見る</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../ch01/objective.html"><strong aria-hidden="true">1.1.</strong> 目的</a></li><li class="chapter-item expanded "><a href="../ch01/accesspdb.html"><strong aria-hidden="true">1.2.</strong> Protein Data Bank (PDB)にアクセスする</a></li><li class="chapter-item expanded "><a href="../ch01/download.html"><strong aria-hidden="true">1.3.</strong> PDB データのダウンロード</a></li><li class="chapter-item expanded "><a href="../ch01/launchpymol.html"><strong aria-hidden="true">1.4.</strong> PyMOL の起動</a></li><li class="chapter-item expanded "><a href="../ch01/displaypdb.html"><strong aria-hidden="true">1.5.</strong> 大腸菌由来アルカリホスファターゼのグラフィック表示</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../ch01/colorbychain.html"><strong aria-hidden="true">1.5.1.</strong> チェインごとの色分け</a></li><li class="chapter-item expanded "><a href="../ch01/colorbyss.html"><strong aria-hidden="true">1.5.2.</strong> 二次構造ごとの色分け</a></li><li class="chapter-item expanded "><a href="../ch01/saveimage.html"><strong aria-hidden="true">1.5.3.</strong> 画像の保存</a></li><li class="chapter-item expanded "><a href="../ch01/savesessionfile.html"><strong aria-hidden="true">1.5.4.</strong> セッションファイルへの保存</a></li><li class="chapter-item expanded "><a href="../ch01/focusbindingsite.html"><strong aria-hidden="true">1.5.5.</strong> リガンド結合部位への注目</a></li></ol></li><li class="chapter-item expanded "><a href="../ch01/humanalp.html"><strong aria-hidden="true">1.6.</strong> ヒトアルカリホスファターゼとの構造比較</a></li><li class="chapter-item expanded "><a href="../ch01/hydrophobicity.html"><strong aria-hidden="true">1.7.</strong> タンパク質の疎水性・親水性残基の分布を確認する</a></li><li class="chapter-item expanded "><a href="../ch01/conservation.html"><strong aria-hidden="true">1.8.</strong> タンパク質の位置依存的なアミノ酸保存度の違いを理解する</a></li><li class="chapter-item expanded "><a href="../ch01/qmmm.html"><strong aria-hidden="true">1.9.</strong> アルカリホスファターゼの加水分解酵素としての働き</a></li></ol></li><li class="chapter-item expanded "><a href="../ch02/index.html"><strong aria-hidden="true">2.</strong> 第2章 Internal GUI の使い方</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../ch02/loadmol.html"><strong aria-hidden="true">2.1.</strong> 分子構造のロード</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../ch02/load_file.html"><strong aria-hidden="true">2.1.1.</strong> 構造ファイルのロード</a></li><li class="chapter-item expanded "><a href="../ch02/load_supformat.html"><strong aria-hidden="true">2.1.2.</strong> サポートしている構造ファイル形式</a></li><li class="chapter-item expanded "><a href="../ch02/load_biol_unit.html"><strong aria-hidden="true">2.1.3.</strong> Biological Unitを考慮した分子構造のロード</a></li></ol></li><li class="chapter-item expanded "><a href="../ch02/dispseq.html"><strong aria-hidden="true">2.2.</strong> 配列の表示</a></li><li class="chapter-item expanded "><a href="../ch02/objpanel.html"><strong aria-hidden="true">2.3.</strong> オブジェクトパネル</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../ch02/showandhide.html"><strong aria-hidden="true">2.3.1.</strong> 分子構造の表示形式のON/OFF (Show and Hide)</a></li><li class="chapter-item expanded "><a href="../ch02/label.html"><strong aria-hidden="true">2.3.2.</strong> ラベルの設定(Label)</a></li><li class="chapter-item expanded "><a href="../ch02/color.html"><strong aria-hidden="true">2.3.3.</strong> 色の設定(Color)</a></li></ol></li><li class="chapter-item expanded "><a href="../ch02/mouse.html"><strong aria-hidden="true">2.4.</strong> マウス操作</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../ch02/buttonmode.html"><strong aria-hidden="true">2.4.1.</strong> 操作モード</a></li><li class="chapter-item expanded "><a href="../ch02/buttontable.html"><strong aria-hidden="true">2.4.2.</strong> 各モードにおける操作一覧</a></li><li class="chapter-item expanded "><a href="../ch02/buttonaction.html"><strong aria-hidden="true">2.4.3.</strong> 操作の詳細</a></li></ol></li><li class="chapter-item expanded "><a href="../ch02/session.html"><strong aria-hidden="true">2.5.</strong> セッションの保存</a></li><li class="chapter-item expanded "><a href="../ch02/export.html"><strong aria-hidden="true">2.6.</strong> 構造ファイルのエクスポート</a></li><li class="chapter-item expanded "><a href="../ch02/saveimage.html"><strong aria-hidden="true">2.7.</strong> 画像の保存</a></li></ol></li><li class="chapter-item expanded "><a href="../ch03/index.html"><strong aria-hidden="true">3.</strong> 第3章 External GUIの使い方</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../ch03/file.html"><strong aria-hidden="true">3.1.</strong> File</a></li><li class="chapter-item expanded "><a href="../ch03/edit.html"><strong aria-hidden="true">3.2.</strong> Edit</a></li><li class="chapter-item expanded "><a href="../ch03/build.html"><strong aria-hidden="true">3.3.</strong> Build</a></li><li class="chapter-item expanded "><a href="../ch03/movie.html" class="active"><strong aria-hidden="true">3.4.</strong> Movie</a></li><li class="chapter-item expanded "><a href="../ch03/display.html"><strong aria-hidden="true">3.5.</strong> Display</a></li><li class="chapter-item expanded "><a href="../ch03/setting.html"><strong aria-hidden="true">3.6.</strong> Setting</a></li><li class="chapter-item expanded "><a href="../ch03/scene.html"><strong aria-hidden="true">3.7.</strong> Scene</a></li><li class="chapter-item expanded "><a href="../ch03/mouse.html"><strong aria-hidden="true">3.8.</strong> Mouse</a></li><li class="chapter-item expanded "><a href="../ch03/wizard.html"><strong aria-hidden="true">3.9.</strong> Wizard</a></li><li class="chapter-item expanded "><a href="../ch03/plugin.html"><strong aria-hidden="true">3.10.</strong> Plugin</a></li><li class="chapter-item expanded "><a href="../ch03/help.html"><strong aria-hidden="true">3.11.</strong> help</a></li></ol></li><li class="chapter-item expanded "><a href="../ch04/index.html"><strong aria-hidden="true">4.</strong> 第4章 コマンドラインの使い方</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../ch04/cmd_load.html"><strong aria-hidden="true">4.1.</strong> 分子構造のロード</a></li><li class="chapter-item expanded "><a href="../ch04/cmd_save.html"><strong aria-hidden="true">4.2.</strong> 保存</a></li><li class="chapter-item expanded "><a href="../ch04/cmd_showandhide.html"><strong aria-hidden="true">4.3.</strong> 分子構造の表示形式のON/OFF</a></li><li class="chapter-item expanded "><a href="../ch04/cmd_super.html"><strong aria-hidden="true">4.4.</strong> オブジェクトの重ね合わせ</a></li></ol></li><li class="chapter-item expanded "><a href="../ch05/index.html"><strong aria-hidden="true">5.</strong> 第5章 PyMOL の様々な機能</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../ch05/xtal_elecmap.html"><strong aria-hidden="true">5.1.</strong> 結晶構造の電子密度マップを表示する</a></li><li class="chapter-item expanded "><a href="../ch05/apbs.html"><strong aria-hidden="true">5.2.</strong> APBSプラグインを使った表面電荷表示</a></li><li class="chapter-item expanded "><a href="../ch05/movieschool.html"><strong aria-hidden="true">5.3.</strong> 動画の作成方法</a></li><li class="chapter-item expanded "><a href="../ch05/preset.html"><strong aria-hidden="true">5.4.</strong> 表示形式のプリセット</a></li><li class="chapter-item expanded "><a href="../ch05/gaussian.html"><strong aria-hidden="true">5.5.</strong> Gaussian 16のcubeファイルを開いて分子軌道を表示する</a></li><li class="chapter-item expanded "><a href="../ch05/python_on_pymol.html"><strong aria-hidden="true">5.6.</strong> PyMOL上でのpythonスクリプトの実行</a></li><li class="chapter-item expanded "><a href="../ch05/importpymol.html"><strong aria-hidden="true">5.7.</strong> Pythonからpymolモジュールをimportして使う</a></li></ol></li><li class="chapter-item expanded "><a href="../ch06/index.html"><strong aria-hidden="true">6.</strong> 第6章 プラグインを使う</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../ch06/installation.html"><strong aria-hidden="true">6.1.</strong> プラグインのインストール方法</a></li><li class="chapter-item expanded "><a href="../ch06/dssp.html"><strong aria-hidden="true">6.2.</strong> DSSPプラグイン</a></li><li class="chapter-item expanded "><a href="../ch06/pyvol.html"><strong aria-hidden="true">6.3.</strong> PyVOL GUIプラグイン</a></li><li class="chapter-item expanded "><a href="../ch06/plddt.html"><strong aria-hidden="true">6.4.</strong> pLDDTカラーリングプラグイン</a></li></ol></li><li class="chapter-item expanded "><a href="../append01/index.html"><strong aria-hidden="true">7.</strong> Appendix</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../append01/installation.html"><strong aria-hidden="true">7.1.</strong> インストール方法</a></li><li class="chapter-item expanded "><a href="../append01/term.html"><strong aria-hidden="true">7.2.</strong> 用語</a></li><li class="chapter-item expanded "><a href="../append01/selealgebra.html"><strong aria-hidden="true">7.3.</strong> 選択範囲の文法と演算子</a></li></ol></li></ol>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar" class="menu-bar">
                    <div id="menu-bar-sticky-container">
                        <div class="left-buttons">
                            <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                                <i class="fa fa-bars"></i>
                            </button>
                            <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                                <i class="fa fa-paint-brush"></i>
                            </button>
                            <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                                <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                            </ul>
                            
                            <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                                <i class="fa fa-search"></i>
                            </button>
                            
                        </div>

                        <h1 class="menu-title">pymol-book</h1>

                        <div class="right-buttons">
                            <a href="../print.html" title="Print this book" aria-label="Print this book">
                                <i id="print-button" class="fa fa-print"></i>
                            </a>
                            
                        </div>
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h2 id="movie"><a class="header" href="#movie">Movie</a></h2>
<img src="./image/movie/moviemenu.png" width="30%">
<p>PyMOLのMovie機能を使うことでカメラまたは分子自体の動き・表示に時限式のプログラムを施し、分子を様々な角度から映すことができるようになります。</p>
<h3 id="append"><a class="header" href="#append">Append</a></h3>
<p>この機能は指定した秒数分の<strong>フレーム</strong>を確保するのに使います。メニュー上では<code>0.25</code>〜<code>60</code> secondの延長が可能です。このとき、設定されている<a href="#FPS">FPS</a>の値（後述）に応じて延長されるフレーム数が増加します。つまり、30FPSに設定されているときに2 second延長しようとすると、60フレーム分追加されることになります。</p>
<p>コマンドでは、60フレーム分の枠を確保する場合には<code>mset 1x60</code>のような形で入力します。この60フレームは30FPSに設定しているときですと2秒に相当します。</p>
<hr>
<h3 id="program"><a class="header" href="#program">Program</a></h3>
<p>ムービーに登録する動きのプログラミングを行います。視点を変更する（つまり分子自体の座標は変化しない）<strong>Camera Loop</strong>, 登録しておいたScene（<a href="scene.html">Scene</a>のページを参照）の入れ替えを制御する<strong>Scene Loop</strong>, 表示された分子オブジェクトにstateがある状態（NMR構造やMDシミュレーションの動きのデータが入ったオブジェクトなど）での動きの再生を行う<strong>State Loop</strong>, Stateをすべて再生した後に逆再生を行う<strong>State Sweep</strong>が用意されています。</p>
<p>Program機能を使うと、PyMOLの画面下にFrameのインジケータが出現します。これを<strong>ムービーパネル</strong>と呼びます。ここには現在どのフレームにいるか、そのフレームにカメラが設定されているかどうかを示す小さなアイコンが表示されます。</p>
<p>以下に示す動きのプログラムは複数連結させることも可能で、Camera Loop Nutate の後に State Loopを行い、Camera Loop X-Rockを行う……という設定にすることも可能です。</p>
<h4 id="camera-loop"><a class="header" href="#camera-loop">Camera Loop</a></h4>
<p>カメラ視点を制御するメニューです。中には<strong>Nutate</strong>, <strong>X-Rock</strong>, <strong>X-Roll</strong>, <strong>Y-Rock</strong>, <strong>Y-Roll</strong>のメニューがあります。それぞれどういった動きをするものなのかを以下で紹介していきます。</p>
<h5 id="nutate"><a class="header" href="#nutate">Nutate</a></h5>
<p>Nutateは<a href="https://ja.wikipedia.org/wiki/%E7%AB%A0%E5%8B%95">章動</a>のことで、物体の回転運動において、歳差運動をする回転軸の動きの短周期で微小な成分を指します。以下の動画のようなカメラの動きを行います。</p>
<video width="100%" height="100%" controls autoplay loop>
<source src="./image/movie/cameranutate1.mp4" type="video/mp4">
</video>
<p>GUIメニューからは動きの秒数と歳差運動の角度をいくつか選ぶことができます。
コマンドでは<code>movie.add_nutate(4,15,start=1)</code>となっています（4秒間、角度15度設定の場合）。<code>start=</code>の値にはこのプログラムを付け加えるFrameの開始番号を入力します。</p>
<h5 id="x-rock-y-rock"><a class="header" href="#x-rock-y-rock">X-Rock, Y-Rock</a></h5>
<p>X-Rock, Y-Rockは画面\(x\)軸または\(y\)軸に対してカメラ角度を指定した値の範囲分だけ傾ける運動を繰り返します。以下の動画のようなカメラの動きを行います。</p>
<video width="100%" height="100%" controls autoplay loop>
<source src="./image/movie/xrock1.mp4" type="video/mp4">
</video>
<p>コマンドでは<code>movie.add_rock(2,30,axis='x',start=1)</code>となっています（2秒間、角度30度、\(x\)軸rock設定の場合）。<code>start=</code>の値にはこのプログラムを付け加えるFrameの開始番号を入力します。</p>
<h5 id="x-roll-y-roll"><a class="header" href="#x-roll-y-roll">X-Roll, Y-Roll</a></h5>
<p>X-Roll, Y-Rollは画面\(x\)軸または\(y\)軸に、指定された時間で1周して戻ってくるように回転させます。以下の動画のようなカメラの動きを行います。</p>
<video width="100%" height="100%" controls autoplay loop>
<source src="./image/movie/xroll1.mp4" type="video/mp4">
</video>
<p>コマンドでは<code>movie.add_roll(4.0,axis='x',start=1)</code>となっています（4秒間、\(x\)軸回転設定の場合）。<code>start=</code>の値にはこのプログラムを付け加えるFrameの開始番号を入力します。</p>
<h4 id="scene-loop"><a class="header" href="#scene-loop">Scene Loop</a></h4>
<p>この機能を使うためには、<a href="./scene.html">Scene機能</a>によっていくつかのSceneを事前に用意しておく必要があります。このScene間でカメラの動きをシームレスにつなげてムービーパネルに登録してくれます。</p>
<p>下の動画の例では先にF1, F2, F3の3つのSceneが登録された状態で示しています。</p>
<h5 id="nutate-1"><a class="header" href="#nutate-1">nutate</a></h5>
<p>登録されているSceneを順番に移動しながら、各Sceneについて指定した秒数分のnutateを行っていきます。</p>
<video width="100%" height="100%" controls autoplay loop>
<source src="./image/movie/scenenutate1.mp4" type="video/mp4">
</video>
<p>コマンドでは<code>set sweep_angle 30; cmd.movie.add_scenes(None, 2, rock=4, start=1)</code>となっています（角度30度、2秒間動作、nutate設定の場合）。<code>start=</code>の値にはこのプログラムを付け加えるFrameの開始番号を入力します。</p>
<h5 id="x-rock-y-rock-1"><a class="header" href="#x-rock-y-rock-1">X-Rock, Y-Rock</a></h5>
<p>登録されているSceneを順番に移動しながら、各Sceneについて指定した秒数分のX-Rock/Y-Rockを行っていきます。</p>
<video width="100%" height="100%" controls autoplay loop>
<source src="./image/movie/scenexrock1.mp4" type="video/mp4">
</video>
<p>コマンドでは<code>set sweep_angle 30; cmd.movie.add_scenes(None, 2, rock=2, start=1)</code>となっています（角度30度、2秒間動作、\(x\)軸Rockの場合）。\(y\)軸Rockの場合は<code>rock=1</code>に設定します。<code>start=</code>の値にはこのプログラムを付け加えるFrameの開始番号を入力します。</p>
<h5 id="steady"><a class="header" href="#steady">Steady</a></h5>
<p>登録されているSceneを順番に移動しながら、各Sceneについて指定した秒数分だけ静止します。</p>
<video width="100%" height="100%" controls autoplay loop>
<source src="./image/movie/scenesteady1.mp4" type="video/mp4">
</video>
<p>コマンドでは<code>cmd.movie.add_scenes(None, 1.0, rock=0, start=1)</code>となっています（角度30度、1秒間静止の場合）。</p>
<h4 id="state-loop"><a class="header" href="#state-loop">State Loop</a></h4>
<p>この機能を使うためには、すでに1つ以上のロード済みの生体分子オブジェクトに複数のStateが入っている状態である必要があります。PDBに登録されている構造のうち、NMRで構造が決定されたものはたいてい複数のStateが入っていますが、結晶構造には通常複数のStateは入っていません。または、MDシミュレーションのトラジェクトリデータをロードすることで、複数のStateをもたせることもできます。</p>
<p>以下の例ではNMRで構造決定された<a href="https://www.rcsb.org/structure/1G03">PDB: 1G03</a>の構造オブジェクトを利用しています。State loop機能は、このState間での動きをムービーパネルに登録してくれます。</p>
<p>State Loopは全Stateを順に再生します。<code>n second pause</code>で停止時間を指定した場合、Stateの再生前、再生後に指定した時間分の停止フレームが設定されます。</p>
<video width="100%" height="100%" controls autoplay loop>
<source src="./image/movie/stateloop1.mp4" type="video/mp4">
</video>
<p>コマンドでは<code>movie.add_state_loop(n, m, start=1)</code>です（1/<em>n</em>倍速、<em>m</em>秒pauseを挟む場合）。動画では1倍速、1秒pause設定にしています。<code>start=</code>の値にはこのプログラムを付け加えるFrameの開始番号を入力します。</p>
<h4 id="state-sweep"><a class="header" href="#state-sweep">State Sweep</a></h4>
<p>この機能もStateが複数ある構造オブジェクトがロードされていることを前提としています。全Stateを順に再生させて最後のStateまで到達した後、Stateを逆再生します。<code>n second pause</code>で停止時間を指定した場合、最後のstateに到達した後に逆再生を始めるまでと、最初と最後にもそれぞれ停止フレームが設定されます。</p>
<video width="100%" height="100%" controls autoplay loop>
<source src="./image/movie/statesweep1.mp4" type="video/mp4">
</video>
<p>コマンドでは<code>movie.add_state_sweep(n, m, start=1)</code>です（1/<em>n</em>倍速、<em>m</em>秒pauseを挟む場合）。動画では1/2倍速、1秒pause設定にしています。<code>start=</code>の値にはこのプログラムを付け加えるFrameの開始番号を入力します。</p>
<h3 id="update-last-program"><a class="header" href="#update-last-program">Update last program</a></h3>
<p><strong>最後にGUIメニューから行った</strong>動作プログラムを再実行させます。コマンドでプログラムしたものはこの<code>Update last program</code>を押しても再実行されないので注意してください。</p>
<h3 id="remove-last-program"><a class="header" href="#remove-last-program">Remove last program</a></h3>
<p><strong>最後にGUIメニューから行った</strong>動作プログラムを削除することができます。コマンドからプログラムしたものについては無効のようです。</p>
<h3 id="reset"><a class="header" href="#reset">Reset</a></h3>
<p>作成しているすべてのMovieのフレーム情報をすべて消去します。コマンドは<code>mset; rewind</code>です。</p>
<hr>
<h3 id="frame-rate"><a class="header" href="#frame-rate">Frame Rate</a></h3>
<p>1秒あたりの動き（フレーム）の数に関する設定です。</p>
<h4 id="fps"><a class="header" href="#fps">FPS</a></h4>
<p>Frame per second(FPS, 1秒あたりのフレーム)を設定します。デフォルトは<code>30</code>FPSに設定されており、1秒あたり最大で30枚の静止画像数（いわゆる「コマ」）を処理するようになっています。GUIからは<code>30</code>, <code>15</code>, <code>5</code>, <code>1</code>, <code>0.3</code>を選べるようになっていますが、コマンドからは任意の値を設定できます。</p>
<p>動画として後々出力し他の方に見せる場合、FPSの値は配信するマシン環境やネットワークなどによっても上限を制限されるので、現実的には<code>30</code>が主流の値、よくて<code>60</code>FPSです。</p>
<p>コマンドでは<code>set movie_fps, (value)</code>です。<code>(value)</code>にはFPSのfloat値を入力します（デフォルトでは<code>30</code>）。</p>
<h4 id="input-typecheckbox-show-frame-rate"><a class="header" href="#input-typecheckbox-show-frame-rate"><input type="checkbox"> Show Frame Rate</a></h4>
<p>Internal GUIの右下部分の再生ボタンの上に、Frame Rateが表示されるようになります。デフォルトでは<code>OFF</code>です。</p>
<p>コマンドでは<code>set show_frame_rate, (value)</code>です。<code>(value)</code>の部分は<code>1</code>, <code>0</code>を指定でき, <code>1</code>でON, <code>0</code>でOFFとなります。(value)の部分に<code>on</code>, <code>off</code>と入れても有効です。</p>
<h4 id="reset-meter"><a class="header" href="#reset-meter">Reset meter</a></h4>
<p>コマンドは<code>meter_reset</code>で、PyMOLのドキュメントによれば</p>
<blockquote>
<p><strong>meter_reset</strong> resets the frames per second counter.</p>
</blockquote>
<p>とのこと。Show Frame RateをONにした状態でこのボタンを押すとHzの数字が現在の値にアップデートされる。実際には表示形式の変更などの内部処理時に自動的に呼び出されているくらいで、人間が明示的に使う機会はあまりなさそう。</p>
<hr>
<h3 id="input-typecheckbox-checked-auto-interpolate"><a class="header" href="#input-typecheckbox-checked-auto-interpolate"><input type="checkbox" checked> Auto Interpolate</a></h3>
<p>プログラム動作を指定するタイミングのフレーム（<strong>キーフレーム</strong>と呼びます）が新たに設定されたときに、その前後のカメラの動きを自動的に補間してくれます。デフォルトでは<code>ON</code>です。</p>
<p>この機能は上記のようなGUIによるキーフレームの設定を使っているときにはすでに補間が働いていることもあって、あまり効果をなしません。コマンドベースでムービーのプログラミングを行っているときには効果がよくわかります。</p>
<p>例として以下のムービー作成コマンドを、Auto InterpolateがONのときとOFFのときで比較してみます。</p>
<pre><code>fetch 1rx1, async=0
as cartoon
as sticks, organic
mset 1x70
orient
mview store, 1
mview store, 70
orient organic
mview store, 30
mview store, 40
mplay
</code></pre>
<p>これはタンパク質1rx1をロードし、<code>mset 1x70</code>で70フレーム分の枠を用意した後、1フレームめと70フレームめにはタンパク質全体の様子を見せる<code>orient</code>の状態でキーフレームを設定し、30フレームめと40フレームめでは<code>orient organic</code>によってリガンド部分にズームした状態のキーフレームを設定しています。</p>
<p>Auto Interpolateが<code>on</code>の場合は以下のような動画が作られます。</p>
<video width="100%" height="100%" controls autoplay loop>
<source src="./image/movie/autoinp1.mp4" type="video/mp4">
</video>
<p>Auto Interpolateが<code>off</code>の場合は以下のようになります。</p>
<video width="100%" height="100%" controls autoplay loop>
<source src="./image/movie/autoinp2.mp4" type="video/mp4">
</video>
<p>このように動きを設定したフレーム間でのカメラの補間が働いていないことがわかります。</p>
<p>コマンドは<code>set movie_auto_interpolate, on</code>または<code>off</code>です。</p>
<h3 id="input-typecheckbox-checked-show-panel"><a class="header" href="#input-typecheckbox-checked-show-panel"><input type="checkbox" checked> Show Panel</a></h3>
<p>ムービーパネルの表示・非表示を設定します。コマンドでは<code>set movie_panel, 1</code>で表示となります（<code>0</code>で非表示）。デフォルトでは<code>1</code>になっています。</p>
<h3 id="input-typecheckbox-checked-loop-frames"><a class="header" href="#input-typecheckbox-checked-loop-frames"><input type="checkbox" checked> Loop Frames</a></h3>
<p>ムービーを構成するフレームが再生し終わったときに自動的にループして再生するか、それとも停止するかを設定できます。コマンドでは<code>set movie_loop, 1</code>でループ再生となります（<code>0</code>で停止）。デフォルトでは<code>1</code>になっています。</p>
<h3 id="input-typecheckboxdraw-frames"><a class="header" href="#input-typecheckboxdraw-frames"><input type="checkbox">Draw Frames</a></h3>
<p>このオプションにチェックを入れておくと、各フレームを再生する時に<code>draw</code>によるややきれいな画像レンダリングが行われるようになります。<code>ray</code>よりはとても動作が軽い一方、<code>set ray_opaque_background, 0</code>を使った背景の透明化などはできないようです。</p>
<p>コマンドでは<code>set draw_frames, 1</code>でdraw描画がONになります（<code>0</code>で解除）。デフォルトでは<code>0</code>になっています。</p>
<h3 id="input-typecheckboxray-trace-frames"><a class="header" href="#input-typecheckboxray-trace-frames"><input type="checkbox">Ray Trace Frames</a></h3>
<p>このオプションにチェックを入れておくと、各フレームを再生する時に<code>ray</code>によるレイトレーシングが行われるようになります。1フレームごとにきれいな画像が出力されるので、後に動画ファイルとして出力する場合に利用できますが、反面1フレームごとの再生速度が極端に低下するので普段チェックを入れておくことはおすすめしません。</p>
<p>コマンドでは<code>set ray_trace_frames, 1</code>でレイトレーシングがONになります（<code>0</code>で解除）。デフォルトでは<code>0</code>になっています。</p>
<h3 id="input-typecheckboxcache-frame-images"><a class="header" href="#input-typecheckboxcache-frame-images"><input type="checkbox">Cache Frame Images</a></h3>
<p>このオプションにチェックを入れておくと、各フレームの画像がメモリに保存されるようになります。メモリに保存されると2回め以降のループ再生時の再計算が必要なくなり、表示が早くなります。ただし、画像をキャッシュすると表示サイズやフレーム数に応じて膨大な量のメモリを消費するので、少なくともこのオプションを使う前に表示画像サイズをコントロールする<code>viewport</code>コマンドでウィンドウを縮小しておくことを勧めます。</p>
<p>コマンドでは<code>set cache_frames, 1</code>でキャッシュが<code>ON</code>になります（<code>0</code>で解除）。デフォルトでは<code>0</code>になっています。</p>
<h3 id="clear-image-cache"><a class="header" href="#clear-image-cache">Clear Image Cache</a></h3>
<p>キャッシュされた画像情報をクリアしてメモリを開放します。<code>Cache Frame Images</code>にチェックを入れていなければ自動的にキャッシュが溜まることはないので使う必要はありません。コマンドでは<code>mclear</code>です。</p>
<hr>
<h3 id="input-typecheckbox-checked-static-singletons"><a class="header" href="#input-typecheckbox-checked-static-singletons"><input type="checkbox" checked> Static Singletons</a></h3>
<p>このオプションにチェックを入れておくと、PyMOLでロードされたオブジェクトが複数あり、かつ複数stateを持つオブジェクト（PDB: 1G03など）と1 stateしか存在しないオブジェクトがあったときに、再生ボタンを押してstate 2以降になった場合でも、その1 stateしか持っていないオブジェクトも画面上に表示され続けます。チェックがOFFだと、その1 stateのオブジェクトは表示されなくなります。</p>
<p>コマンドでは<code>set static_singletons, 1</code>で1 stateのオブジェクトの表示を許可します（<code>0</code>で表示しなくなります）。デフォルトでは<code>1</code>になっています。</p>
<h3 id="input-typecheckbox-show-all-states"><a class="header" href="#input-typecheckbox-show-all-states"><input type="checkbox"> Show All States</a></h3>
<p>このオプションにチェックを入れておくと、ロードしたオブジェクトに複数のStateが存在する場合に全Stateが表示されるようになります。</p>
<img src="./image/movie/allstates.png">
<p>コマンドでは<code>set all_states, 1</code>で全state表示が<code>ON</code>になります（<code>0</code>で解除）。デフォルトでは<code>0</code>になっています。</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="../ch03/build.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="../ch03/display.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a href="../ch03/build.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a href="../ch03/display.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        
        <!-- Livereload script (if served using the cli tool) -->
        <script type="text/javascript">
            var socket = new WebSocket("ws://localhost:3000/__livereload");
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload(true); // force reload from server (not from cache)
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>
        

        

        

        
        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        

    </body>
</html>
